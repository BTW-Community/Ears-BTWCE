TODO: Refactor all the mods to share some amount of code.
